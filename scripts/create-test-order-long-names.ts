// –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: npx tsx scripts/create-test-order-long-names.ts

// –ò–∑–æ–ª–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
(function() {
const API_BASE_URL = process.env.API_BASE || 'http://localhost:3000/api';

async function login(username: string, password: string): Promise<string> {
  const response = await fetch(`${API_BASE_URL}/auth/login`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ login: username, password }),
  });

  if (!response.ok) {
    const error = await response.json().catch(() => ({ error: 'Unknown error' }));
    throw new Error(`–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ${error.error || 'Unknown error'}`);
  }

  const setCookieHeader = response.headers.get('set-cookie');
  if (!setCookieHeader) {
    throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å cookie –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
  }

  const match = setCookieHeader.match(/session_token=([^;]+)/);
  if (!match) {
    throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å session_token –∏–∑ cookie');
  }

  return match[1];
}

async function createShipment(shipmentData: any, sessionToken: string): Promise<any> {
  const response = await fetch(`${API_BASE_URL}/shipments`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Cookie': `session_token=${sessionToken}`,
    },
    body: JSON.stringify(shipmentData),
  });

  const data = await response.json();

  if (!response.ok) {
    throw new Error(
      `HTTP ${response.status}: ${data.error || data.message || 'Unknown error'}`
    );
  }

  return data;
}

async function main() {
  try {
    console.log('üß™ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤\n');
    console.log('='.repeat(60));

    // 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    console.log('\n1Ô∏è‚É£ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–∞–∫ admin...');
    const sessionToken = await login('admin', 'YOUR_PASSWORD');
    console.log('‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞');

    // ============================================
    // –ó–ê–ö–ê–ó: 15 –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
    // ============================================
    console.log('\n' + '='.repeat(60));
    console.log('üì¶ –ó–ê–ö–ê–ó: 15 –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏');
    console.log('='.repeat(60));

    const longNames = [
      '–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–æ—á–Ω–æ–π —Ä–µ–∑–∫–∏ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏ —Ç—Ä—É–± —Ä–∞–∑–ª–∏—á–Ω–æ–≥–æ –¥–∏–∞–º–µ—Ç—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–¥–∞—á–∏ –∏ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è',
      '–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±—ã—Ç–æ–≤–æ–π –ø—Ä–∏–±–æ—Ä –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ø–∏—â–∏ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ñ—É–Ω–∫—Ü–∏–π –≤–∫–ª—é—á–∞—è –ø–∞—Ä–æ–≤–∞—Ä–∫—É –≥—Ä–∏–ª—å –∏ —Ä–µ–∂–∏–º –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Å —Ç–∞–π–º–µ—Ä–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º',
      '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω —Å –±–æ–ª—å—à–∏–º —ç–∫—Ä–∞–Ω–æ–º –≤—ã—Å–æ–∫–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –º–æ—â–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∫–∞–º–µ—Ä –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –≤–∏–¥–µ–æ—Å—ä–µ–º–∫–∏ –≤ –ª—é–±—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö',
      '–≠—Ä–≥–æ–Ω–æ–º–∏—á–Ω–æ–µ –æ—Ñ–∏—Å–Ω–æ–µ –∫—Ä–µ—Å–ª–æ —Å –æ—Ä—Ç–æ–ø–µ–¥–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–ø–∏–Ω—ã —Ä–µ–≥—É–ª–∏—Ä—É–µ–º–æ–π –≤—ã—Å–æ—Ç–æ–π –ø–æ–¥–ª–æ–∫–æ—Ç–Ω–∏–∫–∞–º–∏ –∏ –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –∫–∞—á–∞–Ω–∏—è –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ –¥–Ω—è',
      '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —à–≤–µ–π–Ω–∞—è –º–∞—à–∏–Ω–∞ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—Ç—Ä–æ—á–µ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–ø—Ä–∞–≤–∫–æ–π –Ω–∏—Ç–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤—ã—à–∏–≤–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É–∑–æ—Ä–æ–≤ –∏ –ª–æ–≥–æ—Ç–∏–ø–æ–≤',
      '–ú–æ—â–Ω—ã–π –ø—ã–ª–µ—Å–æ—Å —Å –∞–∫–≤–∞—Ñ–∏–ª—å—Ç—Ä–æ–º —Å–∏—Å—Ç–µ–º–æ–π HEPA —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ç—É—Ä–±–æ—â–µ—Ç–∫–æ–π –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —É–±–æ—Ä–∫–∏ –∫–æ–≤—Ä–æ–≤ –ø–∞—Ä–∫–µ—Ç–∞ –∏ –¥—Ä—É–≥–∏—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–æ–π –º–æ—â–Ω–æ—Å—Ç–∏',
      '–°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ —Å —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –±–æ–ª—å—à–∏–º –æ–±—ä–µ–º–æ–º –±–∞—Ä–∞–±–∞–Ω–∞ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∏–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—Ä–æ–≥—Ä–∞–º–º —Å—Ç–∏—Ä–∫–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ç–∫–∞–Ω–µ–π',
      '–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ —Å —Å–∏—Å—Ç–µ–º–æ–π No Frost –¥–≤—É–º—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –∫–∞–º–µ—Ä–∞–º–∏ –∑–æ–Ω–æ–π —Å–≤–µ–∂–µ—Å—Ç–∏ –∏ —Å–∏—Å—Ç–µ–º–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–∏—Ç–∞–Ω–∏—è',
      '–ú–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∞—è –ø–µ—á—å —Å –∫–æ–Ω–≤–µ–∫—Ü–∏–µ–π –≥—Ä–∏–ª–µ–º –∏ —Ñ—É–Ω–∫—Ü–∏–µ–π —Ä–∞–∑–º–æ—Ä–æ–∑–∫–∏ —Å —Å–µ–Ω—Å–æ—Ä–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±–ª—é–¥',
      '–ö–æ—Ñ–µ–º–∞—à–∏–Ω–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ–º —ç—Å–ø—Ä–µ—Å—Å–æ –∫–∞–ø—É—á–∏–Ω–æ –∏ –ª–∞—Ç—Ç–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ –∫—Ä–µ–ø–æ—Å—Ç–∏ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –Ω–∞–ø–∏—Ç–∫–∞ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –æ—á–∏—Å—Ç–∫–∏',
      '–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —á–∞–π–Ω–∏–∫ –∏–∑ –Ω–µ—Ä–∂–∞–≤–µ—é—â–µ–π —Å—Ç–∞–ª–∏ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –∑–∞—â–∏—Ç–æ–π –æ—Ç –ø–µ—Ä–µ–≥—Ä–µ–≤–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–∏–ø—è—á–µ–Ω–∏—è –≤–æ–¥—ã',
      '–ú—É–ª—å—Ç–∏–≤–∞—Ä–∫–∞ —Å –±–æ–ª—å—à–∏–º –æ–±—ä–µ–º–æ–º —á–∞—à–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—Ä–æ–≥—Ä–∞–º–º –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–µ–π –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –≤–∫—É—Å–Ω—ã—Ö –∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –±–ª—é–¥',
      '–†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—Ä—è–¥–∫–æ–π –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —É–±–æ—Ä–∫–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —á–∏—Å—Ç–æ—Ç—ã –≤ –¥–æ–º–µ',
      '–£–º–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –∑–≤—É–∫–æ–º –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º –¥–æ–º–æ–º –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π',
      '–ò–≥—Ä–æ–≤–∞—è –∫–æ–Ω—Å–æ–ª—å –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è —Å –º–æ—â–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 4K —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é —Å –∏–≥—Ä–∞–º–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π',
    ];

    const lines: any[] = [];
    
    // –°–æ–∑–¥–∞–µ–º 15 —Ç–æ–≤–∞—Ä–æ–≤ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
    for (let i = 0; i < 15; i++) {
      lines.push({
        sku: `LONG-NAME-${String(i + 1).padStart(3, '0')}`,
        name: longNames[i],
        qty: Math.floor(Math.random() * 20) + 5,
        uom: '—à—Ç',
        location: `–°—Ç–µ–ª–ª–∞–∂ A / –ü–æ–ª–∫–∞ ${Math.ceil((i + 1) / 3)}`,
        warehouse: i < 5 ? '–°–∫–ª–∞–¥ 1' : i < 10 ? '–°–∫–ª–∞–¥ 2' : '–°–∫–ª–∞–¥ 3',
      });
    }

    const totalQty = lines.reduce((sum, line) => sum + line.qty, 0);

    const testShipment = {
      number: `–†–ù-TEST-LONG-${Date.now()}`,
      customerName: '–û–û–û –ö–æ–º–ø–∞–Ω–∏—è —Å –î–ª–∏–Ω–Ω—ã–º–∏ –ù–∞–∑–≤–∞–Ω–∏—è–º–∏ –¢–æ–≤–∞—Ä–æ–≤',
      destination: '–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥',
      itemsCount: 15,
      totalQty: totalQty,
      weight: 300.0,
      comment: '–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Å–±–æ—Ä–∫–∏',
      businessRegion: '–ú–æ—Å–∫–≤–∞',
      lines: lines,
    };

    console.log('\n2Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞...');
    console.log(`   –ù–æ–º–µ—Ä: ${testShipment.number}`);
    console.log(`   –ö–ª–∏–µ–Ω—Ç: ${testShipment.customerName}`);
    console.log(`   –í—Å–µ–≥–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π: ${testShipment.itemsCount}`);
    console.log(`   –í—Å–µ–≥–æ –µ–¥–∏–Ω–∏—Ü —Ç–æ–≤–∞—Ä–∞: ${testShipment.totalQty}`);
    console.log(`   –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:`);
    console.log(`     - –°–∫–ª–∞–¥ 1: 5 –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π`);
    console.log(`     - –°–∫–ª–∞–¥ 2: 5 –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π`);
    console.log(`     - –°–∫–ª–∞–¥ 3: 5 –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π`);
    console.log(`   –û–∂–∏–¥–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞–Ω–∏–π: 3`);

    console.log('\nüì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞...');
    const result = await createShipment(testShipment, sessionToken);

    console.log('\n‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!');
    console.log(`\nüì¶ –°–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞–Ω–∏–π: ${result.shipment.tasks_count}`);
    console.log('\nüìã –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞–Ω–∏–π:');
    result.shipment.tasks.forEach((task: any, index: number) => {
      console.log(
        `   ${index + 1}. ${task.warehouse} - ${task.items_count} –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π, ${task.total_qty} –µ–¥–∏–Ω–∏—Ü —Ç–æ–≤–∞—Ä–∞, —Å—Ç–∞—Ç—É—Å: ${task.status}`
      );
    });

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–∑–∏—Ü–∏–π
    console.log('\nüîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–∑–∏—Ü–∏–π...');
    if (result.shipment.lines && result.shipment.lines.length > 0) {
      const checkedCount = result.shipment.lines.filter((line: any) => line.checked === true).length;
      const collectedCount = result.shipment.lines.filter((line: any) => line.collected_qty !== null && line.collected_qty !== undefined).length;
      
      if (checkedCount > 0 || collectedCount > 0) {
        console.error(`   ‚ùå –û–®–ò–ë–ö–ê! –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏: ${checkedCount} –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö, ${collectedCount} —Å —Å–æ–±—Ä–∞–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º`);
        console.error(`   ‚ö†Ô∏è –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ (checked: false, collected_qty: null)`);
      } else {
        console.log(`   ‚úÖ –í—Å–µ ${result.shipment.lines.length} –ø–æ–∑–∏—Ü–∏–π –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ (checked: false, collected_qty: null)`);
      }
    } else {
      console.log('   ‚ö†Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∑–∏—Ü–∏—è—Ö –Ω–µ –ø–æ–ª—É—á–µ–Ω–∞');
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º
    const tasksByWarehouse: Record<string, number> = {};
    result.shipment.tasks.forEach((task: any) => {
      tasksByWarehouse[task.warehouse] =
        (tasksByWarehouse[task.warehouse] || 0) + 1;
    });

    console.log('\nüìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π –ø–æ —Å–∫–ª–∞–¥–∞–º:');
    console.log(`   –°–∫–ª–∞–¥ 1: ${tasksByWarehouse['–°–∫–ª–∞–¥ 1'] || 0} –∑–∞–¥–∞–Ω–∏–π`);
    console.log(`   –°–∫–ª–∞–¥ 2: ${tasksByWarehouse['–°–∫–ª–∞–¥ 2'] || 0} –∑–∞–¥–∞–Ω–∏–π`);
    console.log(`   –°–∫–ª–∞–¥ 3: ${tasksByWarehouse['–°–∫–ª–∞–¥ 3'] || 0} –∑–∞–¥–∞–Ω–∏–π`);

    console.log(`\n‚úÖ ID –∑–∞–∫–∞–∑–∞: ${result.shipment.id}`);
    console.log(`‚úÖ –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: ${result.shipment.number}`);
    console.log('\n' + '='.repeat(60));
    console.log('üéâ –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!');
    console.log('='.repeat(60));
    console.log('\nüí° –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Å–±–æ—Ä–∫–∏');
    console.log('   –ù–∞–∑–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ 2 —Å—Ç—Ä–æ–∫–∏ –∏ –±—ã—Ç—å —á–∏—Ç–∞–µ–º—ã–º–∏\n');

  } catch (error: any) {
    console.error('\n‚ùå –û—à–∏–±–∫–∞:', error.message);
    if (error.stack) {
      console.error('Stack trace:', error.stack);
    }
    process.exit(1);
  }
}

main();
})();

