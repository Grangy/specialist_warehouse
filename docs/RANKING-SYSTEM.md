# Система расчета баллов и рейтингов

## Основные понятия

### 1. Позиции и единицы
- **Позиция** — одна строка в заказе (один товар)
- **Единица** — количество штук/метров/упаковок этого товара
- **Заказ** — весь комплект товаров для одного клиента

### 2. Время выполнения
- **Время сборки** — сколько времени потратил сборщик на сборку заказа
- **Время проверки** — сколько времени потратил проверяльщик на проверку заказа
- **Ожидаемое время** — нормативное время, которое должно уйти на заказ

### 3. Эффективность
- **Эффективность** — насколько быстро выполнен заказ относительно нормы
- Если эффективность > 1 — работали быстрее нормы (хорошо!)
- Если эффективность < 1 — работали медленнее нормы

## Как считаются баллы

### Для сборщиков и проверяльщиков

**Важно:** И сборщики, и проверяльщики получают баллы по одной и той же формуле. Разница только во времени выполнения:
- **Сборщик:** время от начала сборки до завершения сборки
- **Проверяльщик:** время от завершения сборки до подтверждения проверки

**Проверяльщик получает баллы за:**
- ✅ **Количество проверенных позиций** (основной показатель)
- ✅ Сложность (переключения складов)
- ✅ Скорость проверки

**Единицы не учитываются** — проверяльщик проверяет позиции, а не количество единиц. Трудозатратность одинаковая: нужно проверить одну позицию, независимо от того, 1 единица или 3000 единиц в этой позиции.

### Шаг 1: Базовые очки
```
Базовые очки = Позиции + 3 × Переключения складов
```

**Важно:** Единицы (units) больше не учитываются в баллах, так как трудозатратность одинаковая независимо от количества единиц (например, 1 мешок или 3000 мешков).

**Пример:**
- 10 позиций, 1 переключение склада
- Базовые очки = 10 + 3 × 1 = **13 баллов**

### Шаг 2: Ожидаемое время (норма)
```
Ожидаемое время = 30 сек × Позиции + 120 сек × Переключения
```

**Важно:** Единицы не учитываются в ожидаемом времени, так как основная трудозатратность - это количество позиций.

**Пример:**
- 10 позиций, 1 переключение
- Ожидаемое время = 30 × 10 + 120 × 1 = 300 + 120 = **420 секунд** (7 минут)

### Шаг 3: Эффективность
```
Эффективность = Ожидаемое время / Фактическое время
```

**Пример:**
- Ожидаемое время: 420 секунд
- Фактическое время: 350 секунд (5.8 минут)
- Эффективность = 420 / 350 = **1.2** (работали на 20% быстрее нормы!)

**Ограничение:** Эффективность ограничивается от 0.5 до 1.5 (чтобы не было "космических" значений)

### Шаг 4: Финальные баллы за заказ
```
Баллы за заказ = Базовые очки × Эффективность
```

**Пример:**
- Базовые очки: 13
- Эффективность: 1.2
- Баллы за заказ = 13 × 1.2 = **15.6 баллов**

## Дополнительные метрики

### PPH (Positions Per Hour)
**Позиций в час** — сколько позиций собирается за час работы
```
PPH = Позиции × 3600 / Время в секундах
```

### UPH (Units Per Hour)
**Единиц в час** — сколько единиц собирается за час работы
```
UPH = Единицы × 3600 / Время в секундах
```

### Ранги
Ранги рассчитываются по перцентилям (10 уровней):
- **Ранг 1** — самые медленные (нижние 10%)
- **Ранг 10** — самые быстрые (верхние 10%)

Каждому рангу соответствует "животный" уровень (от медленных до быстрых животных).

## Нормативы (можно настроить)

- **A = 30 сек** — норматив секунд на 1 позицию (основной показатель)
- **B = 0 сек** — норматив секунд на 1 единицу (убрано, единицы не влияют)
- **C = 120 сек** — штраф за переключение склада
- **K = 0** — коэффициент для единиц в базовых очках (убрано, единицы не влияют)
- **M = 3** — коэффициент для переключений в базовых очках

## Пример полного расчета

### Пример для сборщика

**Заказ:**
- 5 позиций
- 20 единиц
- 1 переключение склада
- Время сборки: 200 секунд (3.3 минуты)

**Расчет:**
1. Базовые очки = 5 + 3 × 1 = **8 баллов** (единицы не учитываются)
2. Ожидаемое время = 30 × 5 + 120 × 1 = 150 + 120 = **270 секунд** (единицы не учитываются)
3. Эффективность = 270 / 200 = **1.35** → ограничиваем до **1.35**
4. Баллы за заказ = 8 × 1.35 = **10.8 баллов**

**Метрики:**
- PPH = 5 × 3600 / 200 = **90 позиций/час**

### Пример для проверяльщика

**Тот же заказ:**
- 5 позиций (проверено)
- 20 единиц (не учитываются)
- 1 переключение склада
- Время проверки: 150 секунд (2.5 минуты) — от завершения сборки до подтверждения

**Расчет:**
1. Базовые очки = 5 + 3 × 1 = **8 баллов** (единицы не учитываются)
2. Ожидаемое время = 30 × 5 + 120 × 1 = 150 + 120 = **270 секунд** (единицы не учитываются)
3. Эффективность = 270 / 150 = **1.8** → ограничиваем до **1.5** (максимум)
4. Баллы за проверку = 8 × 1.5 = **12 баллов**

**Метрики:**
- PPH = 5 × 3600 / 150 = **120 позиций/час**

**Вывод:** Проверяльщик получил больше баллов, потому что проверил быстрее нормы!

## Итог

**Чем быстрее работаешь относительно нормы — тем больше баллов получаешь!**

### Для сборщиков:
Система справедливо учитывает:
- ✅ **Количество позиций** (основной показатель)
- ✅ Сложность (переключения складов)
- ✅ Скорость сборки

### Для проверяльщиков:
Система справедливо учитывает:
- ✅ **Количество проверенных позиций** (основной показатель)
- ✅ Сложность (переключения складов)
- ✅ Скорость проверки

**Единицы не учитываются** ни для сборщиков, ни для проверяльщиков, так как трудозатратность одинаковая независимо от количества единиц:
- Сборщику нужно найти одну позицию (1 мешок или 3000 мешков — одна позиция)
- Проверяльщику нужно проверить одну позицию (1 мешок или 3000 мешков — одна позиция)

**Одинаковая формула для всех:** И сборщики, и проверяльщики получают баллы по одной формуле, основанной на количестве позиций, сложности и скорости выполнения.
