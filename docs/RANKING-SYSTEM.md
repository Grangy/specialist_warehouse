# Система расчета баллов и рейтингов

## Основные понятия

### 1. Позиции и единицы
- **Позиция** — одна строка в заказе (один товар)
- **Единица** — количество штук/метров/упаковок этого товара
- **Заказ** — весь комплект товаров для одного клиента

### 2. Время выполнения
- **Время сборки** — сколько времени потратил сборщик на сборку заказа
- **Время проверки** — сколько времени потратил проверяльщик на проверку заказа
- **Ожидаемое время** — нормативное время, которое должно уйти на заказ

### 3. Эффективность
- **Эффективность** — насколько быстро выполнен заказ относительно нормы
- Если эффективность > 1 — работали быстрее нормы (хорошо!)
- Если эффективность < 1 — работали медленнее нормы

## Как считаются баллы

### Шаг 1: Базовые очки
```
Базовые очки = Позиции + 0.3 × Единицы + 3 × Переключения складов
```

**Пример:**
- 10 позиций, 50 единиц, 1 переключение склада
- Базовые очки = 10 + 0.3 × 50 + 3 × 1 = 10 + 15 + 3 = **28 баллов**

### Шаг 2: Ожидаемое время (норма)
```
Ожидаемое время = 30 сек × Позиции + 2 сек × Единицы + 120 сек × Переключения
```

**Пример:**
- 10 позиций, 50 единиц, 1 переключение
- Ожидаемое время = 30 × 10 + 2 × 50 + 120 × 1 = 300 + 100 + 120 = **520 секунд** (8.7 минут)

### Шаг 3: Эффективность
```
Эффективность = Ожидаемое время / Фактическое время
```

**Пример:**
- Ожидаемое время: 520 секунд
- Фактическое время: 400 секунд (6.7 минут)
- Эффективность = 520 / 400 = **1.3** (работали на 30% быстрее нормы!)

**Ограничение:** Эффективность ограничивается от 0.5 до 1.5 (чтобы не было "космических" значений)

### Шаг 4: Финальные баллы за заказ
```
Баллы за заказ = Базовые очки × Эффективность
```

**Пример:**
- Базовые очки: 28
- Эффективность: 1.3
- Баллы за заказ = 28 × 1.3 = **36.4 балла**

## Дополнительные метрики

### PPH (Positions Per Hour)
**Позиций в час** — сколько позиций собирается за час работы
```
PPH = Позиции × 3600 / Время в секундах
```

### UPH (Units Per Hour)
**Единиц в час** — сколько единиц собирается за час работы
```
UPH = Единицы × 3600 / Время в секундах
```

### Ранги
Ранги рассчитываются по перцентилям (10 уровней):
- **Ранг 1** — самые медленные (нижние 10%)
- **Ранг 10** — самые быстрые (верхние 10%)

Каждому рангу соответствует "животный" уровень (от медленных до быстрых животных).

## Нормативы (можно настроить)

- **A = 30 сек** — норматив секунд на 1 позицию
- **B = 2 сек** — норматив секунд на 1 единицу
- **C = 120 сек** — штраф за переключение склада
- **K = 0.3** — коэффициент для единиц в базовых очках
- **M = 3** — коэффициент для переключений в базовых очках

## Пример полного расчета

**Заказ:**
- 5 позиций
- 20 единиц
- 1 переключение склада
- Время выполнения: 200 секунд (3.3 минуты)

**Расчет:**
1. Базовые очки = 5 + 0.3 × 20 + 3 × 1 = 5 + 6 + 3 = **14 баллов**
2. Ожидаемое время = 30 × 5 + 2 × 20 + 120 × 1 = 150 + 40 + 120 = **310 секунд**
3. Эффективность = 310 / 200 = **1.55** → ограничиваем до **1.5**
4. Баллы за заказ = 14 × 1.5 = **21 балл**

**Метрики:**
- PPH = 5 × 3600 / 200 = **90 позиций/час**
- UPH = 20 × 3600 / 200 = **360 единиц/час**

## Итог

**Чем быстрее работаешь относительно нормы — тем больше баллов получаешь!**

Система справедливо учитывает:
- ✅ Количество позиций
- ✅ Количество единиц
- ✅ Сложность (переключения складов)
- ✅ Скорость выполнения
