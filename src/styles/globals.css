@tailwind base;
@tailwind components;
@tailwind utilities;

/* Базовые стили */
@layer base {
  body {
    @apply bg-slate-950 text-slate-100;
  }
}

/* Анимации для Region Priorities */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

.animate-slideDown {
  animation: slideDown 0.3s ease-out;
}

.animate-pulse-slow {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Полноэкранный попап сообщения от админа */
@keyframes messagePop {
  0% {
    opacity: 0;
    transform: scale(0.85);
  }
  60% {
    transform: scale(1.03);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-messagePop {
  animation: messagePop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Топ дня /top — эпичное появление призовых мест */
@keyframes top-podium-1 {
  0% {
    opacity: 0;
    transform: scale(0.85) translateY(24px);
    filter: drop-shadow(0 0 0 transparent);
  }
  60% {
    transform: scale(1.02) translateY(-4px);
    filter: drop-shadow(0 0 20px rgba(234, 179, 8, 0.5));
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: drop-shadow(0 0 16px rgba(234, 179, 8, 0.35));
  }
}

@keyframes top-podium-2 {
  0% {
    opacity: 0;
    transform: scale(0.9) translateX(-40px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateX(0);
  }
}

@keyframes top-podium-3 {
  0% {
    opacity: 0;
    transform: scale(0.9) translateX(40px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateX(0);
  }
}

@keyframes top-badge-pop {
  0% { transform: scale(0); opacity: 0; }
  70% { transform: scale(1.15); }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes top-card-stagger {
  0% { opacity: 0; transform: translateY(12px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes top-title-in {
  0% { opacity: 0; transform: translateY(-8px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes top-glow-gold {
  0%, 100% { box-shadow: 0 0 20px rgba(234, 179, 8, 0.25); }
  50% { box-shadow: 0 0 28px rgba(234, 179, 8, 0.4); }
}

.animate-top-podium-1 {
  animation: top-podium-1 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.animate-top-podium-2 {
  animation: top-podium-2 0.55s cubic-bezier(0.34, 1.2, 0.64, 1) 0.15s forwards;
  opacity: 0;
}

.animate-top-podium-3 {
  animation: top-podium-3 0.55s cubic-bezier(0.34, 1.2, 0.64, 1) 0.3s forwards;
  opacity: 0;
}

.animate-top-badge-pop {
  animation: top-badge-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.animate-top-card-stagger {
  animation: top-card-stagger 0.4s ease-out forwards;
}

.animate-top-title-in {
  animation: top-title-in 0.5s ease-out forwards;
}

.animate-top-glow-subtle {
  animation: top-glow-gold 2.5s ease-in-out infinite;
}

/* Кастомные стили */
@layer components {
  /* Touch-friendly стили */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Перенос длинных наименований на 2 строки */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    word-break: break-word;
  }

  /* Swipe to confirm стили */
  .swipe-confirm-container {
    touch-action: pan-x;
  }

  .swipe-confirm-slider {
    min-width: 60px;
  }

  .swipe-confirm-container.swiping .swipe-confirm-text {
    opacity: 0.5;
  }

  .swipe-confirm-container.completed .swipe-confirm-slider {
    background: #10b981;
  }

  .swipe-confirm-container.completed .swipe-confirm-text {
    color: white;
    font-weight: bold;
  }

  /* Анимация исчезновения товара при сборке */
  .item-removing {
    animation: slideOutFade 0.5s ease-out forwards;
    pointer-events: none;
    overflow: hidden;
  }

  @keyframes slideOutFade {
    0% {
      opacity: 1;
      transform: translateX(0) scale(1);
      max-height: 200px;
    }
    30% {
      opacity: 0.7;
      transform: translateX(30px) scale(0.99);
    }
    60% {
      opacity: 0.3;
      transform: translateX(60px) scale(0.97);
    }
    100% {
      opacity: 0;
      transform: translateX(120px) scale(0.9);
      max-height: 0;
      margin-top: 0;
      margin-bottom: 0;
      padding-top: 0;
      padding-bottom: 0;
      border-top-width: 0;
      border-bottom-width: 0;
    }
  }

  /* Swipe to collect стили */
  .swipe-collect-track {
    touch-action: pan-x;
    user-select: none;
    -webkit-user-select: none;
  }

  .swipe-collect-slider {
    transition: width 0.1s linear;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    z-index: 2;
  }

  .swipe-collect-text {
    transition: opacity 0.2s, color 0.2s;
    white-space: nowrap;
  }

  .swiping-collect .swipe-collect-text {
    opacity: 0.7;
  }

  .swiping-collect .swipe-collect-slider {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
  }

  .completed-collect .swipe-collect-slider {
    background: #10b981 !important;
    width: 100% !important;
  }

  .completed-collect .swipe-collect-text {
    color: white !important;
    font-weight: bold;
  }

  .swipe-collect-track:active {
    border-color: #3b82f6;
  }

  /* Swipe to confirm item стили (для режима подтверждения) */
  .swipe-confirm-item-track {
    touch-action: pan-x;
    user-select: none;
    -webkit-user-select: none;
  }

  .swipe-confirm-item-slider {
    transition: width 0.1s linear;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    z-index: 2;
  }

  .swipe-confirm-item-text {
    transition: opacity 0.2s, color 0.2s;
    white-space: nowrap;
  }

  .swiping-confirm-item .swipe-confirm-item-text {
    opacity: 0.7;
  }

  .swiping-confirm-item .swipe-confirm-item-slider {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
  }

  .completed-confirm-item .swipe-confirm-item-slider {
    background: #10b981 !important;
    width: 100% !important;
  }

  .completed-confirm-item .swipe-confirm-item-text {
    color: white !important;
    font-weight: bold;
  }

  .swipe-confirm-item-track:active {
    border-color: #3b82f6;
  }

  /* Анимации для админки */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
      max-height: 0;
    }
    to {
      opacity: 1;
      transform: translateY(0);
      max-height: 1000px;
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.4s ease-out forwards;
  }

  .animate-slideDown {
    animation: slideDown 0.3s ease-out forwards;
  }

  /* Анимация для кнопки показа хедера */
  @keyframes slideDownFromTop {
    from {
      opacity: 0;
      transform: translate(-50%, -10px);
    }
    to {
      opacity: 1;
      transform: translate(-50%, 0);
    }
  }

  .animate-slide-down {
    animation: slideDownFromTop 0.3s ease-out forwards;
  }

  .hover\:scale-102:hover {
    transform: scale(1.02);
  }

  /* Стили для планшетов (вертикальная ориентация 799x1280) */
  @media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
    /* Grid layout для товаров в модальных окнах на планшетах */
    .tablet-products-grid {
      display: grid !important;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      padding: 0.5rem;
    }

    /* Карточки товаров на планшете */
    .tablet-product-card {
      background: rgb(15, 23, 42);
      border: 1px solid rgb(51, 65, 85);
      border-radius: 0.5rem;
      padding: 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      transition: all 0.2s;
    }

    .tablet-product-card:hover {
      border-color: rgb(71, 85, 105);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    /* Компактные кнопки на планшете */
    .tablet-product-card button {
      padding: 0.375rem 0.5rem !important;
      font-size: 0.7rem !important;
      min-height: 28px !important;
      min-width: 28px !important;
    }

    /* Уменьшенные иконки в кнопках */
    .tablet-product-card button svg {
      width: 0.75rem !important;
      height: 0.75rem !important;
    }

    /* Компактные input поля */
    .tablet-product-card input[type="number"] {
      width: 2.5rem !important;
      padding: 0.25rem !important;
      font-size: 0.7rem !important;
    }

    /* Уменьшенные кнопки +/- */
    .tablet-product-card .qty-controls button {
      width: 24px !important;
      height: 24px !important;
      font-size: 0.7rem !important;
    }

    /* Скрываем таблицу на планшете */
    .tablet-hide-table {
      display: none !important;
    }

    /* Показываем grid на планшете */
    .tablet-show-grid {
      display: grid !important;
    }
  }

  /* Кастомный скроллбар для списков регионов */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(51, 65, 85, 0.3);
    border-radius: 4px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(139, 92, 246, 0.5);
    border-radius: 4px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(139, 92, 246, 0.7);
  }
}

/* Медиа запросы для мобильных */
@layer utilities {
  @media (max-width: 768px) {
    /* Улучшенный скролл на мобильных */
    .overflow-x-auto {
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
    }

    /* Скрытие скроллбара */
    .scrollbar-hide {
      -ms-overflow-style: none;  /* IE и Edge */
      scrollbar-width: none;  /* Firefox */
    }

    .scrollbar-hide::-webkit-scrollbar {
      display: none;  /* Chrome, Safari и Opera */
    }

    /* Минимальный размер области нажатия для кнопок */
    button {
      min-height: 44px;
      min-width: 44px;
    }

    /* Улучшенная работа с input на мобильных */
    input[type="number"] {
      font-size: 16px; /* Предотвращает зум на iOS */
    }
  }
}

